name: 'install-dev-container-cli'
description:  'Installs the devcontainer cli'
runs:
    using: 'composite'
    steps:
        - name: Install Devcontainer cli
          shell: bash
          run: |
            # echo "Installing npm.."
            # sudo apt-get install npm
            # echo ""
            # echo "Running npm cache clean -f..."
            # sudo npm cache clean -f
            # echo "Running npm install -g n..."
            # sudo npm install -g n
            # echo "Running n stable..."
            # sudo n stable
            # echo "Running npm install -g @devcontainers/cli..."
            # sudo npm install -g @devcontainers/cli

            if ! command -v npm &> /dev/null
            then
                echo "npm is not installed, installing..."
                sudo apt-get update
                sudo apt-get install -y npm
                echo "Checking the direction..."
                npm --version
            else
                echo "npm is installed"
            fi
            echo "Runnning 'npm cache clean -f'..."
            sudo npm cache clean -f
            echo "Runnning 'npm install -g n'..."
            sudo npm install -g n
            echo "Runnning 'n stable'..."
            sudo n stable
            echo "Runnning 'npm install -g @devcontainers/cli'..."
            npm install -g @devcontainers/cli
            echo "Checking the version..."
            devcontainer --version
            printenv
            
