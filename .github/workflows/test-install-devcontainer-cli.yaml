on: 
    workflow_call:
      inputs:
        agent:
          description: 'The agent to run the job on'
          required: true
          type: string

jobs:
  test-install-devcontainer-cli:
    runs-on: ${{ inputs.agent }}

    steps:
    - uses: actions/checkout@v2

    - name: Check for internet
      shell: bash
      run: |
        RESULT=$(curl https://www.microsoft.com)
        if [ -z "$RESULT" ]
        then
          echo "Internet connection is available"
        else
          echo "Internet connection is not available"
          exit 1
        fi

    - uses: microsoft/azure-orbital-space-sdk-github-actions/composite-actions/install-devcontainer-cli@main

    - name: Validate devcontainer cli
      shell: bash
      run: |
        if command -v devcontainer &> /dev/null
        then
            echo "devcontainer CLI is installed"
        else
            echo "devcontainer CLI is not installed"
            exit 1
        fi